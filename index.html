<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Toko Online</title>
  <style>
    :root{
      --primary:#2563eb; /* biru */
      --accent:#10b981;  /* hijau */
      --bg:#0b1020;     /* hitam estetik kebiruan */
      --card:#11162a;   /* kartu */
      --muted:#94a3b8;  /* abu */
      --text:#e5e7eb;   /* terang */
      --danger:#ef4444;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif;background:linear-gradient(180deg,#0b1020,#0f172a 40%,#0b1020);color:var(--text)}
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:auto;padding:16px}
    header{position:sticky;top:0;z-index:50;background:#0b1020cc;backdrop-filter:blur(8px);border-bottom:1px solid #1f2937}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:10px 0}
    .branding{display:flex;gap:10px;align-items:center}
    .branding .logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--primary),var(--accent));display:grid;place-items:center;color:white;font-weight:700}
    .branding h1{font-size:18px;margin:0}
    .nav-links{display:flex;gap:10px}
    .nav-links a{padding:8px 12px;border:1px solid #1f2937;border-radius:12px}
    .nav-links a:hover{border-color:#334155}
    .hero{display:grid;grid-template-columns:1.3fr 1fr;gap:20px;align-items:center;padding:22px 0}
    .hero h2{font-size:32px;margin:0 0 12px}
    .hero p{color:var(--muted);margin:0 0 16px}
    .hero .card{background:var(--card);padding:20px;border:1px solid #1f2937;border-radius:16px}
    .btn{cursor:pointer;display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid #1f2937;background:#0b1020;color:var(--text)}
    .btn.primary{background:var(--primary);border-color:var(--primary);color:white}
    .btn.success{background:var(--accent);border-color:var(--accent);color:#042015}
    .btn.danger{background:var(--danger);border-color:var(--danger);color:white}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
    @media(max-width:960px){.hero{grid-template-columns:1fr}.grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:560px){.grid{grid-template-columns:1fr}}
    .product{background:var(--card);border:1px solid #1f2937;border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
    .product img{width:100%;height:160px;object-fit:cover;background:#0b1020}
    .product .p-body{padding:12px;display:flex;flex-direction:column;gap:8px}
    .price{font-weight:700}
    .muted{color:var(--muted)}

    /* Cart Drawer */
    .drawer{position:fixed;right:-420px;top:0;width:420px;max-width:90vw;height:100vh;background:#0b1020;border-left:1px solid #1f2937;transition:all .25s ease;z-index:80;display:flex;flex-direction:column}
    .drawer.open{right:0}
    .drawer header{padding:12px 16px;background:#0b1020;border-bottom:1px solid #1f2937}
    .drawer .content{flex:1;overflow:auto;padding:16px;display:flex;flex-direction:column;gap:12px}
    .cart-item{display:grid;grid-template-columns:56px 1fr auto;gap:10px;align-items:center;border:1px solid #1f2937;border-radius:12px;padding:8px}
    .cart-item img{width:56px;height:56px;object-fit:cover;border-radius:10px}
    .qty{display:inline-flex;align-items:center;border:1px solid #1f2937;border-radius:10px;overflow:hidden}
    .qty button{all:unset;cursor:pointer;padding:6px 10px}
    .qty input{width:42px;text-align:center;background:transparent;border:none;color:var(--text)}

    /* Checkout */
    form label{display:block;margin-top:10px;font-size:.95rem}
    input,select,textarea{width:100%;padding:10px;border-radius:12px;border:1px solid #1f2937;background:#0b1020;color:var(--text)}
    textarea{min-height:80px}
    .section{margin-top:28px}
    .card{background:var(--card);border:1px solid #1f2937;border-radius:16px;padding:16px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:720px){.row{grid-template-columns:1fr}}
    .totals{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
    footer{border-top:1px solid #1f2937;margin-top:40px;padding:20px 0;color:var(--muted)}
    .pill{display:inline-block;padding:2px 10px;border-radius:999px;border:1px solid #1f2937;color:var(--muted);font-size:.85rem}
  </style>
</head>
<body>
  <!-- ===================== CONFIG ===================== -->
  <script>
    // Ganti data berikut sesuai kebutuhan tokumu
    const CONFIG = {
      BUSINESS_NAME: "WI WOK STORE",
      WA_NUMBER: "6281261840125", // format internasional tanpa +
      ADDRESS: "SMKN 1 PEKANBARU",
      // Rekening / akun e-wallet (bisa diganti)
      EWALLETS: {
        GoPay: { account: "0812-3456-7890", qr: "" },
        DANA:  { account: "0813-1111-2222", qr: "" },
      },
      // Daftar menu/produk (bebas diubah)
      PRODUCTS: [
        {id:1, name:"Mochi", price:2500, desc:"Mochi lembut isi cokelat", img:"images/mochi.jpg"},
        {id:8, name:"Frycorn", price:4000, desc:"buatan emak zaki", img:"images/frycorn.jpg"}
      ]
    }
  </script>

  <header>
    <div class="container nav">
      <div class="branding">
        <div class="logo">WW</div>
        <div>
          <h1 id="brand">WI WOK STORE</h1>
          <div class="pill" id="addr">SMKN 1 PEKANBARU</div>
        </div>
      </div>
      <nav class="nav-links">
        <a href="#menu">Menu</a>
        <a href="#order">Pesan</a>
        <a href="#pembayaran">Pembayaran</a>
        <button class="btn" id="openCart">üõí Keranjang (<span id="cartCount">0</span>)</button>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div>
        <h2>Nikmati Menu Favorit & Pesan <span style="color:var(--accent)">Instan</span></h2>
        <p>Klik <b>Tambah</b> untuk memasukkan ke keranjang. Setelah itu isi data di bagian <b>Pesan</b> dan pilih metode pembayaran <b>Cash</b> atau <b>E-Wallet</b>. Kamu bisa kirim detail pesanan ke <b>WhatsApp</b> toko otomatis!</p>
        <div style="display:flex;gap:10px;margin-top:8px">
          <a class="btn primary" href="#menu">Lihat Menu</a>
          <button class="btn" id="openCart2">Lihat Keranjang</button>
        </div>
      </div>
      <div class="card">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:8px">
          <div>
            <div class="muted">Status Toko</div>
            <div id="storeStatus" style="font-weight:700">Buka</div>
          </div>
          <div>
            <div class="muted">Metode</div>
            <div>Cash ‚Ä¢ E-Wallet</div>
          </div>
          <div>
            <div class="muted">Lokasi</div>
            <div id="storeAddr">-</div>
          </div>
        </div>
      </div>
    </section>

    <section id="menu" class="section">
      <h3>üçΩÔ∏è Menu</h3>
      <div id="products" class="grid"></div>
    </section>

    <section id="order" class="section">
      <h3>üßæ Pesan</h3>
      <div class="card">
        <form id="checkoutForm">
          <div class="row">
            <div>
              <label>Nama</label>
              <input required name="name" placeholder="Nama kamu" type="tel" pattern="[o-9]{10,15}"Masukan angka saja"/>
            </div>
            <div>
              <label>Nomor WhatsApp</label>
              <input required name="phone" placeholder="no whatsapp kamu" />
            </div>
          </div>
          <label>Alamat / Catatan</label>
          <textarea name="address" placeholder="nama kelas atau catatan pesanan"></textarea>

          <div class="row">
            <div>
              <label>Metode Pembayaran</label>
              <select name="payMethod" id="payMethod">
                <option value="Cash">Cash</option>
                <option value="E-Wallet">E-Wallet</option>
              </select>
            </div>
            <div id="walletWrap" style="display:none">
              <label>Pilih E-Wallet</label>
              <select name="walletName" id="walletName"></select>
            </div>
          </div>

          <div id="walletInfo" class="card" style="display:none;margin-top:12px">
            <div class="muted">Transfer ke akun berikut, lalu kirim bukti via WhatsApp:</div>
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;margin-top:8px">
              <div>
                <div id="walletTitle" style="font-weight:700"></div>
                <div id="walletAccount" class="muted"></div>
              </div>
              <img id="walletQR" alt="QR" style="width:120px;height:120px;border-radius:12px;border:1px solid #1f2937;object-fit:cover;display:none" />
            </div>
          </div>

          <div class="totals">
            <div class="muted">Total</div>
            <div id="grandTotal" style="font-size:20px;font-weight:800">Rp0</div>
          </div>

          <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
            <button type="button" class="btn" id="btnCetak">üñ®Ô∏è Cetak Struk</button>
            <button type="button" class="btn" id="btnCopy">üìã Salin Rangkuman</button>
            <button type="submit" class="btn success">üì≤ Kirim ke WhatsApp Toko</button>
          </div>
        </form>
      </div>
    </section>

    <section id="pembayaran" class="section">
      <h3>üí≥ Metode Pembayaran</h3>
      <div class="grid">
        <div class="card">
          <h4>Cash</h4>
          <p class="muted">Bayar langsung saat ambil/diantar.</p>
        </div>
        <div class="card">
          <h4>E-Wallet</h4>
          <p class="muted">Dukungan: GoPay, DANA. Info akun dan QR akan muncul saat memilih di form Pesan.</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">¬© <span id="year"></span> <span id="brand2"></span>..</div>
  </footer>

  <!-- Drawer Keranjang -->
  <aside class="drawer" id="drawer">
    <header class="nav">
      <div style="font-weight:700">Keranjang</div>
      <button class="btn danger" id="closeCart">Tutup</button>
    </header>
    <div class="content">
      <div id="cartItems"></div>
      <div id="emptyCart" class="muted">Keranjang kosong.</div>
      <div class="card" id="cartSummary" style="display:none">
        <div class="totals">
          <div>Subtotal</div>
          <div id="cartSubtotal">Rp0</div>
        </div>
        <div class="totals">
          <div>Ongkir (opsional)</div>
          <input id="shipping" type="number" min="0" step="500" placeholder="0" style="max-width:140px" />
        </div>
        <div class="totals" style="font-weight:800">
          <div>Total</div>
          <div id="cartTotal">Rp0</div>
        </div>
        <div style="display:flex;gap:10px;margin-top:8px">
          <button class="btn" id="clearCart">üóëÔ∏è Kosongkan</button>
          <a class="btn primary" href="#order" id="goCheckout">Lanjut ke Pesan</a>
        </div>
      </div>
    </div>
  </aside>

  <script>
    // ===== Helper =====
    const fmt = n => new Intl.NumberFormat('id-ID',{style:'currency',currency:'IDR',maximumFractionDigits:0}).format(n||0);
    const el = sel => document.querySelector(sel);
    const els = sel => Array.from(document.querySelectorAll(sel));

    // ===== State =====
    let CART = JSON.parse(localStorage.getItem('CART')||'[]');

    // ===== Init Branding =====
    el('#brand').textContent = CONFIG.BUSINESS_NAME;
    el('#brand2').textContent = CONFIG.BUSINESS_NAME;
    el('#addr').textContent = CONFIG.ADDRESS;
    el('#storeAddr').textContent = CONFIG.ADDRESS;
    el('#year').textContent = new Date().getFullYear();

    // ===== Render Products =====
    const productsWrap = el('#products');
    function renderProducts(){
      productsWrap.innerHTML = '';
      CONFIG.PRODUCTS.forEach(p=>{
        const card = document.createElement('div');
        card.className = 'product';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.name}"/>
          <div class="p-body">
            <div style="display:flex;justify-content:space-between;gap:8px;align-items:center">
              <div style="font-weight:700">${p.name}</div>
              <div class="price">${fmt(p.price)}</div>
            </div>
            <div class="muted">${p.desc||''}</div>
            <button class="btn primary" data-id="${p.id}">+ Tambah</button>
          </div>`;
        productsWrap.appendChild(card);
      });
      productsWrap.addEventListener('click',e=>{
        const btn = e.target.closest('button[data-id]');
        if(!btn) return;
        const id = +btn.dataset.id;
        const prod = CONFIG.PRODUCTS.find(x=>x.id===id);
        addToCart(prod);
      });
    }

    // ===== Cart =====
    const drawer = el('#drawer');
    el('#openCart').onclick = ()=> drawer.classList.add('open');
    el('#openCart2').onclick = ()=> drawer.classList.add('open');
    el('#closeCart').onclick = ()=> drawer.classList.remove('open');

    function saveCart(){ localStorage.setItem('CART',JSON.stringify(CART)); }
    function calcTotals(){
      const subtotal = CART.reduce((s,i)=> s + i.price * i.qty, 0);
      const ship = +el('#shipping').value || 0;
      const total = subtotal + ship;
      el('#cartSubtotal').textContent = fmt(subtotal);
      el('#cartTotal').textContent = fmt(total);
      el('#grandTotal').textContent = fmt(total);
      el('#cartCount').textContent = CART.reduce((s,i)=>s+i.qty,0);
    }

    function renderCart(){
      const wrap = el('#cartItems');
      wrap.innerHTML = '';
      if(CART.length===0){
        el('#emptyCart').style.display='block';
        el('#cartSummary').style.display='none';
      } else {
        el('#emptyCart').style.display='none';
        el('#cartSummary').style.display='block';
        CART.forEach((item,idx)=>{
          const row = document.createElement('div');
          row.className = 'cart-item';
          row.innerHTML = `
            <img src="${item.img}" alt="${item.name}">
            <div>
              <div style="font-weight:700">${item.name}</div>
              <div class="muted">${fmt(item.price)}</div>
            </div>
            <div style="display:flex;align-items:center;gap:8px">
              <div class="qty">
                <button data-act="dec" data-idx="${idx}">‚Äì</button>
                <input value="${item.qty}" readonly>
                <button data-act="inc" data-idx="${idx}">+</button>
              </div>
              <button class="btn danger" data-act="del" data-idx="${idx}">‚úï</button>
            </div>`;
          wrap.appendChild(row);
        });
      }
      calcTotals();
    }

    el('#cartItems').addEventListener('click', e=>{
      const b = e.target.closest('button');
      if(!b) return;
      const i = +b.dataset.idx;
      const act = b.dataset.act;
      if(act==='inc'){ CART[i].qty++; }
      if(act==='dec'){ CART[i].qty = Math.max(1, CART[i].qty-1); }
      if(act==='del'){ CART.splice(i,1); }
      saveCart();
      renderCart();
    });
    el('#shipping').addEventListener('input', calcTotals);

    function addToCart(prod){
      const ex = CART.find(x=>x.id===prod.id);
      if(ex) ex.qty++; else CART.push({...prod, qty:1});
      saveCart();
      renderCart();
      drawer.classList.add('open');
    }

    el('#clearCart').onclick = ()=>{ if(confirm('Kosongkan keranjang?')){ CART=[]; saveCart(); renderCart(); }}
    el('#goCheckout').onclick = ()=>{ drawer.classList.remove('open'); }

    // ===== Checkout & Payment =====
    const payMethod = el('#payMethod');
    const walletWrap = el('#walletWrap');
    const walletName = el('#walletName');
    const walletInfo = el('#walletInfo');
    const walletTitle = el('#walletTitle');
    const walletAccount = el('#walletAccount');
    const walletQR = el('#walletQR');

    function initWallets(){
      walletName.innerHTML = '';
      Object.keys(CONFIG.EWALLETS).forEach(w=>{
        const opt = document.createElement('option');
        opt.value = w; opt.textContent = w; walletName.appendChild(opt);
      });
    }

    function updateWalletInfo(){
      const w = walletName.value;
      if(!w) return;
      const data = CONFIG.EWALLETS[w];
      walletTitle.textContent = w;
      walletAccount.textContent = 'Akun: ' + data.account;
      if(data.qr){
        walletQR.src = data.qr; walletQR.style.display = 'block';
      } else { walletQR.style.display = 'none'; }
    }

    payMethod.addEventListener('change', ()=>{
      const isWallet = payMethod.value === 'E-Wallet';
      walletWrap.style.display = isWallet ? 'block' : 'none';
      walletInfo.style.display = isWallet ? 'block' : 'none';
      if(isWallet) updateWalletInfo();
    });
    walletName.addEventListener('change', updateWalletInfo);

    // ===== Build Order Summary =====
    function buildSummary(){
      const subtotal = CART.reduce((s,i)=> s+i.price*i.qty, 0);
      const ship = +el('#shipping').value || 0;
      const total = subtotal + ship;
      let lines = [];
      lines.push(`Order ID: ${Date.now().toString().slice(-6)}`);
      lines.push(`Toko: ${CONFIG.BUSINESS_NAME}`);
      lines.push('--- ITEM ---');
      CART.forEach(i=> lines.push(`${i.name} x${i.qty} = ${fmt(i.price*i.qty)}`));
      lines.push(`Subtotal = ${fmt(subtotal)}`);
      lines.push(`Ongkir = ${fmt(ship)}`);
      lines.push(`TOTAL = ${fmt(total)}`);
      return { text: lines.join('\n'), total };
    }

    // ===== Form Submit -> WhatsApp =====
    el('#checkoutForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      if(CART.length===0) return alert('Keranjang masih kosong.');
      const fd = new FormData(e.target);
      const name = fd.get('name').toString().trim();
      const phone = fd.get('phone').toString().trim();
      const address = fd.get('address').toString().trim();
      const method = fd.get('payMethod');
      const wallet = method==='E-Wallet' ? walletName.value : '';
      const { text } = buildSummary();

      const msg = [
        `Halo, saya ${name} (${phone}).`,
        '',
        text,
        '',
        `Metode: ${method}${wallet? ' - '+wallet: ''}`,
        address? 'Alamat/Catatan: '+address : ''
      ].filter(Boolean).join('\n');

      const wa = 'https://wa.me/' + CONFIG.WA_NUMBER + '?text=' + encodeURIComponent(msg);
      window.open(wa,'_blank');
    });

    // ===== Copy & Print =====
    el('#btnCopy').onclick = ()=>{
      const { text } = buildSummary();
      navigator.clipboard.writeText(text).then(()=> alert('Rangkuman disalin!')); 
    }

    el('#btnCetak').onclick = ()=>{
      const win = window.open('', 'PRINT', 'height=600,width=800');
      const { text, total } = buildSummary();
      win.document.write(`<!DOCTYPE html><html><head><title>Struk</title></head><body style="font-family:monospace;white-space:pre-wrap">${text}\n\nTerima kasih!</body></html>`);
      win.document.close();
      win.focus();
      win.print();
      win.close();
    }


  // ===== Batasi input nomor WA hanya angka =====
  const phoneInput = document.querySelector('input[name="phone"]');
  phoneInput.addEventListener('input', () => {
    phoneInput.value = phoneInput.value.replace(/\D/g,''); // hapus semua selain angka
  });


    // ===== Start =====
    function start(){
      initWallets();
      renderProducts();
      renderCart();
    }
    start();
  </script>
</body>
</html>
